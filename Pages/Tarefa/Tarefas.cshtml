@page "/tarefas"
@model task_slayer.Pages.Tarefa.Tarefas
@{
    ViewData["Title"] = "Tarefas - Task Slayer";
}

@section Styles {
    <link href="~/css/tarefas.css" rel="stylesheet" />
}

<!-- üîπ Nome do usu√°rio estilizado -->
<h1 class="user-greeting">PRONTO PRA MAIS UMA AVENTURA, <span>@Model.UsuarioNome</span>?</h1>

<!-- üîπ Cards das tarefas soltos no corpo -->
<div class="tasks-list">
    @foreach (var tarefa in Model.ListTarefas)
    {
        <div class="goblin-card">
            <div class="goblin-ear left"></div>
            <div class="goblin-ear right"></div>

            <div class="goblin-content">
                <h2 class="task-title">@tarefa.Titulo</h2>

                <div class="task-meta">
                    <span class="task-status">Status: <strong>@tarefa.Status.Nome</strong></span>
                </div>
            </div>

            <div class="goblin-footer">
                <span class="task-category">@tarefa.Categoria.Nome</span>

                <div class="task-actions">
                   <form method="post" asp-page-handler="AbrirModal">
                        <input type="hidden" name="id" value="@tarefa.Id" />
                        <button type="submit" class="task-btn view">
                            <i class="fas fa-eye"></i>
                        </button>
                    </form>
                    <a asp-page="./UpdateTarefa" asp-route-id="@tarefa.Id" class="task-btn edit"><i class="fas fa-feather-alt"></i></a>
                    <form method="post" asp-page-handler="Delete" asp-route-id="@tarefa.Id" style="display:inline;">
                        <button type="submit" class="task-btn delete" onclick="return confirm('TEM CERTEZA QUE DESEJA EXCLUIR ESSA TAREFA?')">
                            <i class="fas fa-trash"></i> 
                        </button>
                    </form>
                </div>
            </div>
        </div>
    }
</div>

@if (Model.MostrarModal && Model.TarefaSelecionada != null)
{
        <div id="taskModal" class="task-modal" style="display:flex;">
        <div class="modal-content">
            <div class="modal-ear left"></div>
            <div class="modal-ear right"></div>

            <a class="close" href="/tarefas">&times;</a>

            <h2 class="modal-title">@Model.TarefaSelecionada.Titulo</h2>
            <p class="modal-info"><strong>Descri√ß√£o:</strong> @Model.TarefaSelecionada.Descricao</p>
            <p class="modal-info"><strong>Categoria:</strong> <span class="modal-category">@Model.TarefaSelecionada.Categoria.Nome</span></p>
            <p class="modal-info"><strong>Status:</strong> <span class="modal-status">@Model.TarefaSelecionada.Status.Nome</span></p>
            <p class="modal-info"><strong>Data de Conclus√£o:</strong> <span class="modal-date">@Model.TarefaSelecionada.DataConclusao.ToString("dd/MM/yyyy")</span></p>
        </div>
    </div>
}
